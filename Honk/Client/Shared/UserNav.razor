@inject NavigationManager Navigation
@inject IdentityAuthenticationStateProvider AuthStateProvider

<AuthorizeView>
    <Authorized>
        <MudMenu AnchorOrigin="Origin.TopRight" Class="pl-2">
            <ActivatorContent>
                @if (false) // TODO: user profile picture
                {
                    
                }
                else
                {
                    <MudAvatar Color="Color.Default" Variant="Variant.Outlined">
                        <MudIcon Icon="@Icons.Material.Filled.Person" />
                    </MudAvatar>
                }
            </ActivatorContent>
            <ChildContent>
                <MudMenuItem Href="/profile">Profile</MudMenuItem>
                <MudMenuItem OnClick="BeginSignOut">Log out</MudMenuItem>
            </ChildContent>
        </MudMenu>
    </Authorized>
    <NotAuthorized>
        <MudButton Color="Color.Primary" Variant="Variant.Text" Href="/register">
            Register
        </MudButton>
        <MudButton Color="Color.Primary" Variant="Variant.Text" Href="/login">
            Log in
        </MudButton>
    </NotAuthorized>
</AuthorizeView>

@code {
    private async Task BeginSignOut()
    {
        await AuthStateProvider.LogOutAsync();
        Navigation.NavigateTo("/login");
    }
}
